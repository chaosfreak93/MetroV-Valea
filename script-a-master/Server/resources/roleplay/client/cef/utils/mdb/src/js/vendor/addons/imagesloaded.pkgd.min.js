/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */ !function(e, t) {
    "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", t) : "object" == typeof module && module.exports ? module.exports = t() : e.EvEmitter = t();
}("undefined" != typeof window ? window : this, function() {
    function e() {
    }
    var t = e.prototype;
    return t.on = function(e1, t1) {
        if (e1 && t1) {
            var i = this._events = this._events || {
            }, n = i[e1] = i[e1] || [];
            return n.indexOf(t1) == -1 && n.push(t1), this;
        }
    }, t.once = function(e1, t1) {
        if (e1 && t1) {
            this.on(e1, t1);
            var i = this._onceEvents = this._onceEvents || {
            }, n = i[e1] = i[e1] || {
            };
            return n[t1] = !0, this;
        }
    }, t.off = function(e1, t1) {
        var i = this._events && this._events[e1];
        if (i && i.length) {
            var n = i.indexOf(t1);
            return n != -1 && i.splice(n, 1), this;
        }
    }, t.emitEvent = function(e1, t1) {
        var i = this._events && this._events[e1];
        if (i && i.length) {
            i = i.slice(0), t1 = t1 || [];
            for(var n = this._onceEvents && this._onceEvents[e1], o = 0; o < i.length; o++){
                var r = i[o], s = n && n[r];
                s && (this.off(e1, r), delete n[r]), r.apply(this, t1);
            }
            return this;
        }
    }, t.allOff = function() {
        delete this._events, delete this._onceEvents;
    }, e;
}), (function(e, t) {
    "use strict";
    "function" == typeof define && define.amd ? define([
        "ev-emitter/ev-emitter"
    ], function(i) {
        return t(e, i);
    }) : "object" == typeof module && module.exports ? module.exports = t(e, require("ev-emitter")) : e.imagesLoaded = t(e, e.EvEmitter);
})("undefined" != typeof window ? window : this, function(e, t1) {
    function i(e1, t1) {
        for(var i1 in t1)e1[i1] = t1[i1];
        return e1;
    }
    function n(e1) {
        if (Array.isArray(e1)) return e1;
        var t1 = "object" == typeof e1 && "number" == typeof e1.length;
        return t1 ? d.call(e1) : [
            e1
        ];
    }
    function o(e1, t1, r) {
        if (!(this instanceof o)) return new o(e1, t1, r);
        var s = e1;
        return "string" == typeof e1 && (s = document.querySelectorAll(e1)), s ? (this.elements = n(s), this.options = i({
        }, this.options), "function" == typeof t1 ? r = t1 : i(this.options, t1), r && this.on("always", r), this.getImages(), h && (this.jqDeferred = new h.Deferred), void setTimeout(this.check.bind(this))) : void a.error("Bad element for imagesLoaded " + (s || e1));
    }
    function r(e1) {
        this.img = e1;
    }
    function s(e1, t1) {
        this.url = e1, this.element = t1, this.img = new Image;
    }
    var h = e.jQuery, a = e.console, d = Array.prototype.slice;
    o.prototype = Object.create(t1.prototype), o.prototype.options = {
    }, o.prototype.getImages = function() {
        this.images = [], this.elements.forEach(this.addElementImages, this);
    }, o.prototype.addElementImages = function(e1) {
        "IMG" == e1.nodeName && this.addImage(e1), this.options.background === !0 && this.addElementBackgroundImages(e1);
        var t1 = e1.nodeType;
        if (t1 && u[t1]) {
            for(var i1 = e1.querySelectorAll("img"), n1 = 0; n1 < i1.length; n1++){
                var o1 = i1[n1];
                this.addImage(o1);
            }
            if ("string" == typeof this.options.background) {
                var r1 = e1.querySelectorAll(this.options.background);
                for(n1 = 0; n1 < r1.length; n1++){
                    var s1 = r1[n1];
                    this.addElementBackgroundImages(s1);
                }
            }
        }
    };
    var u = {
        1: !0,
        9: !0,
        11: !0
    };
    return o.prototype.addElementBackgroundImages = function(e1) {
        var t1 = getComputedStyle(e1);
        if (t1) for(var i2 = /url\((['"])?(.*?)\1\)/gi, n2 = i2.exec(t1.backgroundImage); null !== n2;){
            var o2 = n2 && n2[2];
            o2 && this.addBackground(o2, e1), n2 = i2.exec(t1.backgroundImage);
        }
    }, o.prototype.addImage = function(e1) {
        var t1 = new r(e1);
        this.images.push(t1);
    }, o.prototype.addBackground = function(e1, t1) {
        var i2 = new s(e1, t1);
        this.images.push(i2);
    }, o.prototype.check = function() {
        function e1(e2, i2, n2) {
            setTimeout(function() {
                t2.progress(e2, i2, n2);
            });
        }
        var t2 = this;
        return this.progressedCount = 0, this.hasAnyBroken = !1, this.images.length ? void this.images.forEach(function(t3) {
            t3.once("progress", e1), t3.check();
        }) : void this.complete();
    }, o.prototype.progress = function(e1, t2, i2) {
        this.progressedCount++, this.hasAnyBroken = this.hasAnyBroken || !e1.isLoaded, this.emitEvent("progress", [
            this,
            e1,
            t2
        ]), this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, e1), this.progressedCount == this.images.length && this.complete(), this.options.debug && a && a.log("progress: " + i2, e1, t2);
    }, o.prototype.complete = function() {
        var e1 = this.hasAnyBroken ? "fail" : "done";
        if (this.isComplete = !0, this.emitEvent(e1, [
            this
        ]), this.emitEvent("always", [
            this
        ]), this.jqDeferred) {
            var t2 = this.hasAnyBroken ? "reject" : "resolve";
            this.jqDeferred[t2](this);
        }
    }, r.prototype = Object.create(t1.prototype), r.prototype.check = function() {
        var e1 = this.getIsImageComplete();
        return e1 ? void this.confirm(0 !== this.img.naturalWidth, "naturalWidth") : (this.proxyImage = new Image, this.proxyImage.addEventListener("load", this), this.proxyImage.addEventListener("error", this), this.img.addEventListener("load", this), this.img.addEventListener("error", this), void (this.proxyImage.src = this.img.src));
    }, r.prototype.getIsImageComplete = function() {
        return this.img.complete && this.img.naturalWidth;
    }, r.prototype.confirm = function(e1, t3) {
        this.isLoaded = e1, this.emitEvent("progress", [
            this,
            this.img,
            t3
        ]);
    }, r.prototype.handleEvent = function(e1) {
        var t3 = "on" + e1.type;
        this[t3] && this[t3](e1);
    }, r.prototype.onload = function() {
        this.confirm(!0, "onload"), this.unbindEvents();
    }, r.prototype.onerror = function() {
        this.confirm(!1, "onerror"), this.unbindEvents();
    }, r.prototype.unbindEvents = function() {
        this.proxyImage.removeEventListener("load", this), this.proxyImage.removeEventListener("error", this), this.img.removeEventListener("load", this), this.img.removeEventListener("error", this);
    }, s.prototype = Object.create(r.prototype), s.prototype.check = function() {
        this.img.addEventListener("load", this), this.img.addEventListener("error", this), this.img.src = this.url;
        var e1 = this.getIsImageComplete();
        e1 && (this.confirm(0 !== this.img.naturalWidth, "naturalWidth"), this.unbindEvents());
    }, s.prototype.unbindEvents = function() {
        this.img.removeEventListener("load", this), this.img.removeEventListener("error", this);
    }, s.prototype.confirm = function(e1, t3) {
        this.isLoaded = e1, this.emitEvent("progress", [
            this,
            this.element,
            t3
        ]);
    }, o.makeJQueryPlugin = function(t3) {
        t3 = t3 || e.jQuery, t3 && (h = t3, h.fn.imagesLoaded = function(e1, t4) {
            var i2 = new o(this, e1, t4);
            return i2.jqDeferred.promise(h(this));
        });
    }, o.makeJQueryPlugin(), o;
});
